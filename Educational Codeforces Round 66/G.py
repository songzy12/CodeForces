# https://codeforces.com/contest/1175/problem/G 

# The weight of a subsegment (r−l+1)⋅maxl≤i≤r(ai)
# The weight of a partition is a total weight of all its segments.
# Find the partition of minimal weight.

# linear Convex hull trick and persistent Li Chao tree